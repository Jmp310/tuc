# Clash é…ç½®æ–‡ä»¶ (config.yaml) - ä¼˜åŒ–ç‰ˆ for China Telecom Mobile
# ç”Ÿæˆæ—¶é—´: 2025-04-28 (åŸºäºŽæ‚¨çš„ç‰ˆæœ¬ä¿®æ”¹)

# åŸºç¡€è®¾ç½® (åŸºæœ¬ä¿æŒä¸å˜)
mixed-port: 7890
allow-lan: true # å¦‚æžœä½ ä¸éœ€è¦å±€åŸŸç½‘å…¶ä»–è®¾å¤‡è¿žæŽ¥æ‰‹æœºä»£ç†ï¼Œå¯ä»¥è®¾ä¸º false å¢žå¼ºå®‰å…¨æ€§
mode: Rule
log-level: warning # æ”¹ä¸º warning æˆ– error å¯ä»¥å‡å°‘æ—¥å¿—é‡ï¼Œè½»å¾®é™ä½Žç³»ç»Ÿè´Ÿæ‹…
ipv6: true         # ä¿æŒ trueã€‚å¦‚æžœé‡åˆ°é—®é¢˜å¯ä»¥å°è¯•æ”¹ä¸º false æµ‹è¯•

# RESTful API (Web UI æŽ§åˆ¶æŽ¥å£)
external-controller: '127.0.0.1:9090'
# secret: "YOUR_SECRET_HERE" # å¼ºçƒˆå»ºè®®è®¾ç½®å¯†ç 

# --- DNS é…ç½® (é‡ç‚¹ä¼˜åŒ–åŒºåŸŸ) ---
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: redir-host # fake-ip æ¨¡å¼åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½æ›´å¿«ï¼Œä½†å…¼å®¹æ€§ä¸å¦‚ redir-hostï¼Œä¼˜å…ˆä½¿ç”¨ redir-host
  # --- nameserver: ä¼˜å…ˆä½¿ç”¨å¿«é€Ÿå¯é çš„å›½å†…å’Œ DoH/DoT æœåŠ¡å™¨ ---
  nameserver:
    - 223.5.5.5          # AliDNS (å›½å†…å¸¸ç”¨ï¼Œç”µä¿¡è®¿é—®é€šå¸¸å¾ˆå¿«)
    - 119.29.29.29       # DNSPod (å›½å†…å¸¸ç”¨)
    - tls://1.0.0.1:853  # Cloudflare DNS over TLS (å›½å¤–è§£æžå¤‡é€‰ï¼Œæ›´ç¨³å®šé˜²æ±¡æŸ“)
    - https://dns.alidns.com/dns-query # AliDNS over HTTPS (å›½å†… DoHï¼Œä¹Ÿå¯é€‰)
    # - 8.8.8.8          # Google DNS (ä½œä¸ºæ™®é€š UDP/TCP å®¹æ˜“è¢«å¹²æ‰°ï¼Œä¼˜å…ˆçº§é™ä½Žæˆ–ç§»é™¤)
    # - 1.1.1.1          # Cloudflare DNS (åŒä¸Š)

  # --- fallback: ç”¨äºŽæŸ¥è¯¢å›½å¤–åŸŸåæˆ– nameserver è§£æžå¤±è´¥æ—¶ï¼Œä½¿ç”¨å¯é çš„ DoH/DoT ---
  fallback:
    - tls://1.0.0.1:853  # Cloudflare (TLS)
    - https://dns.google/dns-query # Google (HTTPS)
    - https://dns.alidns.com/dns-query # AliDNS (HTTPS) - ä½œä¸º fallback ä¹Ÿå¯ä»¥

  # --- fallback-filter: ä¼˜åŒ–ï¼Œå¢žåŠ  geosite:cn ç¡®ä¿å›½å†…åŸŸåå¼ºåˆ¶èµ° nameserver ---
  fallback-filter:
    geoip: true
    geoip-code: CN
    geosite: # å¢žåŠ  geosite:cn åˆ—è¡¨ï¼Œæ˜Žç¡®æŒ‡å®šå“ªäº›åŸŸååˆ—è¡¨å¿…é¡»ä½¿ç”¨ nameserver è§£æž (é€šå¸¸å°±æ˜¯å›½å†…ç«™ç‚¹)
      - cn
    ipcidr:
      - 240.0.0.0/4
      - 127.0.0.0/8
      - 192.168.0.0/16 # ç¡®è®¤è¿™æ˜¯ä½ çš„å±€åŸŸç½‘æ®µ
      - 10.0.0.0/8
      - 172.16.0.0/12

# ä»£ç†èŠ‚ç‚¹åˆ—è¡¨ (Proxies) - ä¿æŒä¸å˜
proxies:
  - name: "gcp"  # æ‚¨å¯ä»¥è‡ªå®šä¹‰èŠ‚ç‚¹åç§°
    type: vless
    server: 34.81.120.206
    port: 31478
    uuid: d06698ee-2fb6-4ff7-a805-77d892c39d18
    network: tcp
    tls: true
    flow: xtls-rprx-vision
    client-fingerprint: chrome
    servername: www.apple.com # SNI
    reality-opts:
      public-key: siEkxexwmBBk3mW8NkbTyHca4G_pG1qdmsJ_4s_EFyo
      short-id: 6ba85179e30d4fc2

# ä»£ç†ç»„é…ç½® (Proxy Groups) - ç»“æž„ä¿æŒä¸å˜ï¼Œç¡®ä¿åç§°å¼•ç”¨æ­£ç¡®
proxy-groups:
  - name: "ðŸš€ Proxy"
    type: select
    proxies:
      - "gcp"
      - DIRECT

  - name: "ðŸŒ Overseas"
    type: select
    proxies:
      - "ðŸš€ Proxy"
      - DIRECT

  - name: "ðŸ‡¨ðŸ‡³ Mainland"
    type: select
    proxies:
      - DIRECT
      - "ðŸš€ Proxy"

  # (å¯é€‰) å¹¿å‘Šæ‹¦æˆªç»„ - å¦‚æžœéœ€è¦ï¼Œå¯ä»¥å–æ¶ˆæ³¨é‡Š
  - name: "ðŸš« Ads"
    type: select
    proxies:
      - REJECT # REJECT ç›´æŽ¥æ‹’ç»è¿žæŽ¥ï¼Œæ¯” DIRECT æ›´å½»åº•
      - DIRECT

# è§„åˆ™ (Rules) - ç»“æž„ä¿æŒä¸å˜ï¼Œç¡®ä¿ GEO æ–‡ä»¶æœ€æ–°
# ç¡®ä¿ä½ çš„ Clash å®¢æˆ·ç«¯å¯ä»¥è®¿é—®æœ€æ–°çš„ Country.mmdb å’Œ geosite.dat æ–‡ä»¶
rules:
  # --- å¹¿å‘Šæ‹¦æˆªè§„åˆ™ (å¯é€‰) ---
  # - GEOSITE,category-ads-all,ðŸš« Ads # ä½¿ç”¨æ›´å…¨é¢çš„å¹¿å‘Šåˆ—è¡¨

  # --- ç›´è¿žè§„åˆ™ (åŸºæœ¬ä¸å˜) ---
  - DOMAIN,localhost,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT # ç¡®è®¤ä½ çš„å±€åŸŸç½‘æ®µ
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,::1/128,DIRECT
  - IP-CIDR,fc00::/7,DIRECT
  - IP-CIDR,fe80::/10,DIRECT

  # --- å›½å†…/ç§æœ‰ è§„åˆ™ ---
  - GEOSITE,private,DIRECT            # ç§æœ‰ã€ç‰¹æ®ŠåŸŸåä¼˜å…ˆç›´è¿ž
  - GEOSITE,cn,ðŸ‡¨ðŸ‡³ Mainland            # å›½å†…åŸŸååˆ—è¡¨ -> Mainland ç»„ (é»˜è®¤ DIRECT)
  - GEOIP,CN,ðŸ‡¨ðŸ‡³ Mainland              # å›½å†… IP -> Mainland ç»„ (é»˜è®¤ DIRECT)

  # --- æœ€ç»ˆåŒ¹é…è§„åˆ™ ---
  - MATCH,ðŸŒ Overseas                 # å…¶ä»–æ‰€æœ‰æµé‡ -> Overseas ç»„ (é»˜è®¤ ðŸš€ Proxy -> SSR-TW)
